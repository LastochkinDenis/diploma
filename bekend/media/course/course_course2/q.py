data:text/x-python;base64,IyBkZWYgc29sdXRpb24ocm9tYW46IHN0cikgLT4gaW50OgojICAgICByb21hbl9udW1iZXIgPSB7CiMgICAgICAgICAnQ00nOiA5MDAsCiMgICAgICAgICAnQ0QnOiA0MDAsCiMgICAgICAgICAnWEMnOiA5MCwKIyAgICAgICAgICdYTCc6IDQwLAojICAgICAgICAgJ0lYJzogOSwKIyAgICAgICAgICdJVic6IDQsCiMgICAgICAgICAnTSc6IDEwMDAsCiMgICAgICAgICAnRCc6IDUwMCwKIyAgICAgICAgICdDJzogMTAwLAojICAgICAgICAgJ0wnOiA1MCwKIyAgICAgICAgICdYJzogMTAsICAgICAgICAKIyAgICAgICAgICdWJzogNSwKIyAgICAgICAgICdJJzogMSwKIyAgICAgfQoKIyAgICAgcm9tYW4gPSByb21hbi51cHBlcigpLnN0cmlwKCkKIyAgICAgc3VtX3JvbWFuID0gMAoKIyAgICAgZm9yIG51bSBpbiByb21hbl9udW1iZXIua2V5cygpOgojICAgICAgICAgc3VtX3JvbWFuICs9IHJvbWFuLmNvdW50KG51bSkgKiByb21hbl9udW1iZXJbbnVtXQojICAgICAgICAgcm9tYW4gPSByb21hbi5yZXBsYWNlKHN0cihudW0pLCAnJykKICAgIAojICAgICByZXR1cm4gc3VtX3JvbWFuCgojIHByaW50KHNvbHV0aW9uKGlucHV0KCkpKQojTUNDQ0lDSVggTUNDQ1hDSVggCiNodHRwczovL3d3dy5jb2Rld2Fycy5jb20va2F0YS81MWI2MjQ5YzQ2MTIyNTdhYzAwMDAwMDUvdHJhaW4vcHl0aG9uCgojIGRlZiBnZW5lcmF0ZV9oYXNodGFnKHMpOgogICAgCiMgICAgIG1hc3NhZ2UgPSAnIycgKyAnJy5qb2luKHMudGl0bGUoKS5zcGxpdCgpKQoKIyAgICAgaWYgbGVuKG1hc3NhZ2UpID4gMTQwIG9yICcjJzoKIyAgICAgICAgIHJldHVybiBGYWxzZQojICAgICByZXR1cm4gbWFzc2FnZQoKIyBwcmludChnZW5lcmF0ZV9oYXNodGFnKGlucHV0KCkpKQoKIyBkZWYgY2FrZXMocmVjaXBlLCBhdmFpbGFibGUpOgojICAgICBjYWtlc19jb3VudCA9IHt9CgojICAgICBmb3IgaW5ncmVkaWVudF9yZWNpcGUgaW4gcmVjaXBlLmtleXMoKToKIyAgICAgICAgIGluZ3JlZGllbnRfYXZhaWxhYmxlID0gYXZhaWxhYmxlLmdldChpbmdyZWRpZW50X3JlY2lwZSkKIyAgICAgICAgIGlmIG5vdCBpbmdyZWRpZW50X2F2YWlsYWJsZToKIyAgICAgICAgICAgICByZXR1cm4gMAojICAgICAgICAgaW5ncmVkaWVudF9jb3VudCA9IGluZ3JlZGllbnRfYXZhaWxhYmxlIC8vIHJlY2lwZVtpbmdyZWRpZW50X3JlY2lwZV0KIyAgICAgICAgIGlmIGluZ3JlZGllbnRfY291bnQgPD0gMDoKIyAgICAgICAgICAgICByZXR1cm4gMAojICAgICAgICAgY2FrZXNfY291bnRbaW5ncmVkaWVudF9yZWNpcGVdID0gaW5ncmVkaWVudF9jb3VudAojICAgICByZXR1cm4gbWluKGNha2VzX2NvdW50LnZhbHVlcygpKQoKIyBwcmludChjYWtlcyh7J2Zsb3VyJzogNTAwLCAnc3VnYXInOiAyMDAsICdlZ2dzJzogMX0sIHsnZmxvdXInOiAxMjAwLCAnc3VnYXInOiAxMjAwLCAnZWdncyc6IDUsICdtaWxrJzogMjAwfSkpCgoKIyBjbGFzcyBFbGVtZW50OgoKIyAgICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKSAtPiBOb25lOgojICAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlCiMgICAgICAgICBzZWxmLm5leHQgPSBOb25lCgojIGNsYXNzIExpbmtlZExpc3Q6CgojICAgICBkZWYgX19pbml0X18oc2VsZiwgaGVhZCkgLT4gTm9uZToKIyAgICAgICAgIHNlbGYuaGVhZCA9IGhlYWQKICAgIAojICAgICBkZWYgcHVzaF9maXJzdChzZWxmLCBuZXdfZWxlbWVudDogRWxlbWVudCk6CiMgICAgICAgICBpZiBpc2luc3RhbmNlKG5ld19lbGVtZW50LCBFbGVtZW50KToKIyAgICAgICAgICAgICByYWlzZQojICAgICAgICAgb2xkX2VsZW1lbnQgPSBzZWxmLmhlYWQKIyAgICAgICAgIHNlbGYuaGVhZCA9IG5ld19lbGVtZW50CiMgICAgICAgICBzZWxmLmhlYWQubmV4dCA9IG9sZF9lbGVtZW50CiAgICAKIyAgICAgZGVmIHB1dF9maXJzdChzZWxmKToKIyAgICAgICAgIGlmIHNlbGYuaGVhZCBpcyBub3QgTm9uZToKIyAgICAgICAgICAgICBzZWxmLmhlYWQgPSBzZWxmLmhlYWQubmV4dAojICAgICAgICAgICAgIHJldHVybiBzZWxmLmhlYWQubmV4dAojICAgICAgICAgc2VsZi5oZWFkID0gTm9uZQojICAgICAgICAgcmV0dXJuIE5vbmUKCiMgICAgIGRlZiBsb29rX2ZpcnMoc2VsZik6CiMgICAgICAgICByZXR1cm4gc2V0LmhlYWQKCiMgZGVmIHZhbGlkX2JyYWNlcyhzdHJpbmcpOgojICAgICBzdGVrID0gW10KIyAgICAgZm9yIHNpbWJvbCBpbiBzdHJpbmc6CiMgICAgICAgICBpZiBzaW1ib2wgPT0gJyknIG9yIHNpbWJvbCA9PSAnXScgb3Igc2ltYm9sID09ICd9JzoKIyAgICAgICAgICAgICBpZiBzdGVrOgojICAgICAgICAgICAgICAgICBzaW1ib2wyID0gc3Rlay5wb3AoKSAKIyAgICAgICAgICAgICBlbHNlOgojICAgICAgICAgICAgICAgICBzaW1ib2wyID0gJycKIyAgICAgICAgICAgICBpZiBzaW1ib2wyID09ICcoJyBhbmQgc2ltYm9sID09ICcpJyBvciBzaW1ib2wyID09ICdbJyBhbmQgc2ltYm9sID09ICddJyBcCiMgICAgICAgICAgICAgICAgIG9yIHNpbWJvbDIgPT0gJ3snIGFuZCBzaW1ib2wgPT0gJ30nOgojICAgICAgICAgICAgICAgICBjb250aW51ZQojICAgICAgICAgICAgIGVsc2U6CiMgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQojICAgICAgICAgaWYgc2ltYm9sID09ICcoJyBvciBzaW1ib2wgPT0gJ1snIG9yIHNpbWJvbCA9PSAneyc6CiMgICAgICAgICAgICAgc3Rlay5hcHBlbmQoc2ltYm9sKQojICAgICBpZiBzdGVrOgojICAgICAgICAgcmV0dXJuIEZhbHNlCiMgICAgIHJldHVybiBUcnVlCgoKIyBwcmludCh2YWxpZF9icmFjZXMocicoMiArIDIpICogWzIgKyAyXScpKQoKCiNodHRwczovL3d3dy5jb2Rld2Fycy5jb20va2F0YS81Mjc3YzhhMjIxZTIwOWQzZjYwMDBiNTYvdHJhaW4vcHl0aG9uCiMgZnJvbSByZSBpbXBvcnQgc3ViCgojIGRlZiB0b3BfM193b3Jkcyh0ZXh0KToKIyAgICAgdGV4dCA9IHN1YignWy1cIlxcLzo7PD4sLiFAIyQlXiZ+YCo9K18/KV0nLCAnICcsIHRleHQpLmxvd2VyKCkuc3BsaXQoKQojICAgICB3b3JkQ291bnQgPSB7fQojICAgICBmb3Igd29yZCBpbiB0ZXh0OgojICAgICAgICAgaWYgd29yZCA9PSAnXCcnb3Igd29yZCA9PSAnXCdcJ1wnJzoKIyAgICAgICAgICAgICBjb250aW51ZQojICAgICAgICAgaWYgd29yZCBpbiB3b3JkQ291bnQ6CiMgICAgICAgICAgICAgd29yZENvdW50W3dvcmRdICs9IDEKIyAgICAgICAgIHdvcmRDb3VudC5zZXRkZWZhdWx0KHdvcmQsIDEpCiAgICAKIyAgICAgcmV0dXJuIHNvcnRlZCh3b3JkQ291bnQsIGtleT0obGFtYmRhIHg6IC13b3JkQ291bnRbeF0pKVs6M10KCiMgcHJpbnQodG9wXzNfd29yZHMoJ1wnXCcnKSkKCiNodHRwczovL3d3dy5jb2Rld2Fycy5jb20va2F0YS81MWUwNTZmZTU0NGNmMzZjNDEwMDAwZmIvdHJhaW4vcHl0aG9uCgojIGRlZiByb3QxMyhtZXNzYWdlKToKIyAgICAgcmVzdWx0X21lc3NhZ2UgPSAnJwojICAgICBmb3Igc2ltYm9sIGluIG1lc3NhZ2U6CiMgICAgICAgICBzaW1ib2xDb2RlID0gb3JkKHNpbWJvbC5sb3dlcigpKQojICAgICAgICAgc2ltYm9sMTMgPSBzaW1ib2wKIyAgICAgICAgIGlmIDk3IDw9IHNpbWJvbENvZGUgPD0gMTIyOgojICAgICAgICAgICAgICMgc2ltYm9sMTMgPSBjaHIoOTcgKyBhYnMoc2ltYm9sQ29kZSArIDEzIC0gMTIyKSkKIyAgICAgICAgICAgICBzaW1ib2xDb2RlICs9IDEzCiMgICAgICAgICAgICAgaWYgc2ltYm9sQ29kZSA+IDEyMjoKIyAgICAgICAgICAgICAgICAgc2ltYm9sQ29kZSA9IDk2ICsgYWJzKHNpbWJvbENvZGUgLSAxMjIpCiMgICAgICAgICAgICAgc2ltYm9sMTMgPSBjaHIoc2ltYm9sQ29kZSkKIyAgICAgICAgICAgICBpZiBzaW1ib2wuaXN1cHBlcigpOgojICAgICAgICAgICAgICAgICBzaW1ib2wxMyA9IHNpbWJvbDEzLnVwcGVyKCkKIyAgICAgICAgIHJlc3VsdF9tZXNzYWdlICs9IHNpbWJvbDEzCiMgICAgIHJldHVybiByZXN1bHRfbWVzc2FnZQoKCiMgcHJpbnQocm90MTMoJ0VCRzEzIHJrbnpjeXIuJykpCmltcG9ydCBkZWNpbWFsCmltcG9ydCBtYXRoCgpkZWYgc3VtX3N0cmluZ3MoeCwgeSk6CiAgICBkZWNpbWFsLmdldGNvbnRleHQoKS5FbWF4ID0gOTk5OTk5OTkKICAgIGlmIHggPT0gIiI6CiAgICAgICAgeCA9IDAKICAgIGlmIHkgPT0gIiI6CiAgICAgICAgeSA9IDAKICAgIHJldHVybiBzdHIoZGVjaW1hbC5EZWNpbWFsKHgpICsgZGVjaW1hbC5EZWNpbWFsKHkpKQoKCnN1bV9zdHJpbmdzKCI5OTk5OTk5OTk5OTk5OTk5IiwgIjEiKQ==